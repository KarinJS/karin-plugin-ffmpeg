# @karinjs/plugin-ffmpeg

ä¸€ä¸ªä¸º Karin æä¾›å¼€ç®±å³ç”¨çš„ FFmpeg äºŒè¿›åˆ¶æ–‡ä»¶çš„æ’ä»¶ï¼Œå®‰è£…æ—¶è‡ªåŠ¨ä¸‹è½½ FFmpegã€‚

## ğŸ“¦ å®‰è£…

```bash
pnpm add @karinjs/plugin-ffmpeg -w
```

å®‰è£…è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨æµ‹é€Ÿå¹¶é€‰æ‹©æœ€å¿«çš„é•œåƒæºä¸‹è½½ FFmpegã€FFprobe å’Œ FFplayï¼ˆä»… Windowsï¼‰äºŒè¿›åˆ¶æ–‡ä»¶ã€‚

### âš ï¸ pnpm 10 ç”¨æˆ·æ³¨æ„

å¦‚æœä½ ä½¿ç”¨ pnpm 10ï¼Œéœ€è¦ä½¿ç”¨ä»¥ä¸‹å®‰è£…å‘½ä»¤ä»¥å…è®¸æ‰§è¡Œå®‰è£…è„šæœ¬ï¼š

```bash
pnpm --allow-build=@karinjs/plugin-ffmpeg add @karinjs/plugin-ffmpeg -w
```

è¿™æ˜¯å› ä¸º pnpm 10 ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œé»˜è®¤ä¼šé˜»æ­¢ä¾èµ–åŒ…çš„å®‰è£…è„šæœ¬æ‰§è¡Œã€‚æœ¬æ’ä»¶éœ€è¦åœ¨å®‰è£…æ—¶ä¸‹è½½ FFmpeg äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå› æ­¤å¿…é¡»å…è®¸è„šæœ¬æ‰§è¡Œã€‚

<!-- ### å®‰è£…æ•ˆæœé¢„è§ˆ

```

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ç³»ç»Ÿä¿¡æ¯:
  å¹³å°: win32
  æ¶æ„: x64
  å­˜å‚¨: /node_modules/.ffmpeg
  ä»£ç†: è‡ªåŠ¨é€‰æ‹©
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸš€ å¼€å§‹ç½‘ç»œæµ‹é€Ÿï¼Œé€‰æ‹©æœ€å¿«çš„ä¸‹è½½æº...

æµ‹é€Ÿè¿›åº¦ |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 100% | 12/12 ä¸ªæº

æµ‹é€Ÿç»“æœ:
  âœ“ ç›´è¿ GitHub - 1.48 KB/s
  âœ“ ghfast é•œåƒ - 18.55 KB/s
  âœ“ git.yylx é•œåƒ - 1.68 KB/s
  ...

âœ¨ å°†ä½¿ç”¨: ghfast é•œåƒ (18.55 KB/s)

ğŸ“¥ æ­£åœ¨ä» ghfast é•œåƒ ä¸‹è½½ FFmpeg...

ä¸‹è½½ä¸­ |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 100% | 197.06 MB/197.06 MB | 44.47 MB/s | ETA: 0s

âœ“ ä¸‹è½½å®Œæˆï¼ç”¨æ—¶ 4.4sï¼Œå¹³å‡é€Ÿåº¦ 44.45 MB/s
ğŸ“¦ å¼€å§‹è§£å‹...

âœ“ FFmpeg å®‰è£…æˆåŠŸï¼
``` -->

<!-- ### æ‰‹åŠ¨æŒ‡å®šä¸‹è½½æº

å¦‚æœè‡ªåŠ¨é€‰æ‹©çš„æºä¸ç†æƒ³ï¼Œå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æ‰‹åŠ¨æŒ‡å®šï¼š

```bash
# Windows (PowerShell)
$env:FFMPEG_PROXY_INDEX=0; pnpm add @karinjs/plugin-ffmpeg -w

# Linux/macOS
FFMPEG_PROXY_INDEX=0 pnpm add @karinjs/plugin-ffmpeg -w
```

å¯ç”¨çš„æºç´¢å¼•ï¼š
- `0` - ç›´è¿ GitHub å®˜æ–¹ï¼ˆä¸ä½¿ç”¨é•œåƒï¼‰
- `1` - GitHub å®˜æ–¹
- `2` - ghfast é•œåƒ
- `3` - git.yylx é•œåƒ
- `4` - gh-proxy é•œåƒ
- `5` - ghfile é•œåƒ
- `6` - gh-proxy.net é•œåƒ
- `7` - 1win é•œåƒ
- `8` - ghm é•œåƒ
- `9` - gitproxy é•œåƒ
- `10` - jiashu é•œåƒ
- `11` - tbedu é•œåƒ
- `12` - ghproxy é•œåƒ
- ä¸è®¾ç½® - è‡ªåŠ¨æµ‹é€Ÿé€‰æ‹©æœ€å¿«çš„æºï¼ˆæ¨èï¼‰ -->

## ğŸ› ï¸ å¼€å‘

### æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
pnpm install

# å¼€å‘æ¨¡å¼
pnpm dev

# æ„å»º
pnpm build

# æµ‹è¯•å®‰è£…è„šæœ¬
node lib/postinstall.js
```

### é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ index.ts        # ä¸»å…¥å£ï¼Œæä¾› FFmpeg è·¯å¾„è®¿é—®
â”œâ”€â”€ download.ts     # ä¸‹è½½å’Œè§£å‹é€»è¾‘
â”œâ”€â”€ postinstall.ts  # å®‰è£…åè„šæœ¬
â””â”€â”€ types.ts        # TypeScript ç±»å‹å®šä¹‰

lib/                # ç¼–è¯‘è¾“å‡ºç›®å½•
â”œâ”€â”€ index.js
â”œâ”€â”€ download.js
â””â”€â”€ postinstall.js
```

## ğŸ’¡ å¸¸è§é—®é¢˜

### ä¸‹è½½å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

æ’ä»¶ä¼šè‡ªåŠ¨æµ‹é€Ÿå¹¶å°è¯•å¤šä¸ªä¸‹è½½æºï¼ˆåŒ…æ‹¬ 12 ä¸ªå›½å†…é•œåƒï¼‰ï¼Œå¦‚æœæ‰€æœ‰æºéƒ½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ã€‚

ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨è¿è¡Œå®‰è£…è„šæœ¬ï¼š

```bash
# è‡ªåŠ¨é€‰æ‹©æœ€å¿«çš„æº
node lib/postinstall.js

# æ‰‹åŠ¨æŒ‡å®šæºï¼ˆWindows PowerShellï¼‰
$env:FFMPEG_PROXY_INDEX=2; node lib/postinstall.js

# æ‰‹åŠ¨æŒ‡å®šæºï¼ˆLinux/macOSï¼‰
FFMPEG_PROXY_INDEX=2 node lib/postinstall.js
```

### FFmpeg æ¥æº

æœ¬æ’ä»¶ä½¿ç”¨ [BtbN/FFmpeg-Builds](https://github.com/BtbN/FFmpeg-Builds) æä¾›çš„æ¯æ—¥æ„å»ºç‰ˆæœ¬ã€‚

### ä¸‹è½½æºåˆ—è¡¨

æ’ä»¶å†…ç½® 12 ä¸ªé•œåƒæºï¼Œå®‰è£…æ—¶ä¼šè‡ªåŠ¨æµ‹é€Ÿé€‰æ‹©æœ€å¿«çš„ï¼š

- `1` - GitHub å®˜æ–¹
- `2` - ghfast é•œåƒ
- `3` - git.yylx é•œåƒ
- `4` - gh-proxy é•œåƒ
- `5` - ghfile é•œåƒ
- `6` - gh-proxy.net é•œåƒ
- `7` - 1win é•œåƒ
- `8` - ghm é•œåƒ
- `9` - gitproxy é•œåƒ
- `10` - jiashu é•œåƒ
- `11` - tbedu é•œåƒ
- `12` - ghproxy é•œåƒ


é€»è¾‘å‚è€ƒè‡ª [NapCat-Installer](https://github.com/NapNeko/NapCat-Installer/blob/main/script/install.sh)

### æ”¯æŒå“ªäº›å¹³å°ï¼Ÿ

- Windows (x64, x86)
- Linux (x64, arm64, i686)
- macOS (æš‚ä¸æ”¯æŒï¼ŒBtbN ä¸æä¾› macOS æ„å»º)

### å­˜å‚¨ä½ç½®

FFmpeg äºŒè¿›åˆ¶æ–‡ä»¶ä¼šä¸‹è½½åˆ°é¡¹ç›®æ ¹ç›®å½•çš„ `node_modules/.ffmpeg` æ–‡ä»¶å¤¹ä¸­ã€‚

## ğŸ“„ è®¸å¯è¯

MIT

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼
